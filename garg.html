<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Wordle</title>

<style>
body {
    background-color: #121213;
    color: white;
    font-family: Arial, Helvetica, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
}

h1 {
    margin: 20px;
    letter-spacing: 4px;
}

.grid {
    display: grid;
    grid-template-rows: repeat(6, 1fr);
    gap: 10px;
    margin-bottom: 30px;
}

.row {
    display: grid;
    grid-template-columns: repeat(5, 60px);
    gap: 10px;
}

.tile {
    width: 60px;
    height: 60px;
    border: 2px solid #3a3a3c;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 32px;
    font-weight: bold;
    text-transform: uppercase;
}

.correct { background-color: #538d4e; border: none; }
.present { background-color: #b59f3b; border: none; }
.absent  { background-color: #3a3a3c; border: none; }

.keyboard {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.key-row {
    display: flex;
    justify-content: center;
    gap: 6px;
}

button {
    background-color: #818384;
    border: none;
    color: white;
    padding: 12px;
    font-size: 14px;
    font-weight: bold;
    border-radius: 4px;
    cursor: pointer;
    min-width: 40px;
}

button.large {
    min-width: 70px;
}

#message {
    margin-top: 15px;
    font-size: 20px;
}
</style>
</head>

<body>

<h1>WORDLE</h1>

<div class="grid" id="grid"></div>

<div class="keyboard">
    <div class="key-row">
        <button onclick="pressKey('Q')">Q</button>
        <button onclick="pressKey('W')">W</button>
        <button onclick="pressKey('E')">E</button>
        <button onclick="pressKey('R')">R</button>
        <button onclick="pressKey('T')">T</button>
        <button onclick="pressKey('Y')">Y</button>
        <button onclick="pressKey('U')">U</button>
        <button onclick="pressKey('I')">I</button>
        <button onclick="pressKey('O')">O</button>
        <button onclick="pressKey('P')">P</button>
    </div>
    <div class="key-row">
        <button onclick="pressKey('A')">A</button>
        <button onclick="pressKey('S')">S</button>
        <button onclick="pressKey('D')">D</button>
        <button onclick="pressKey('F')">F</button>
        <button onclick="pressKey('G')">G</button>
        <button onclick="pressKey('H')">H</button>
        <button onclick="pressKey('J')">J</button>
        <button onclick="pressKey('K')">K</button>
        <button onclick="pressKey('L')">L</button>
    </div>
    <div class="key-row">
        <button class="large" onclick="pressKey('ENTER')">ENTER</button>
        <button onclick="pressKey('Z')">Z</button>
        <button onclick="pressKey('X')">X</button>
        <button onclick="pressKey('C')">C</button>
        <button onclick="pressKey('V')">V</button>
        <button onclick="pressKey('B')">B</button>
        <button onclick="pressKey('N')">N</button>
        <button onclick="pressKey('M')">M</button>
        <button class="large" onclick="pressKey('BACK')">âŒ«</button>
    </div>
</div>

<div id="message"></div>

<script>
let validWords = [];
let secret;
let row = 0, col = 0, current = "", gameOver = false;

const grid = document.getElementById("grid");
const message = document.getElementById("message");

// Create grid
for (let i = 0; i < 6; i++) {
    const r = document.createElement("div");
    r.className = "row";
    for (let j = 0; j < 5; j++) {
        const t = document.createElement("div");
        t.className = "tile";
        r.appendChild(t);
    }
    grid.appendChild(r);
}

// Load words
fetch("words.json")
  .then(res => res.json())
  .then(data => {
      validWords = data.map(w => w.toUpperCase());
      secret = validWords[Math.floor(Math.random() * validWords.length)];
      console.log("Secret:", secret); // remove later
  });

document.addEventListener("keydown", e => {
    if (gameOver) return;
    if (e.key === "Enter") pressKey("ENTER");
    else if (e.key === "Backspace") pressKey("BACK");
    else if (/^[a-zA-Z]$/.test(e.key)) pressKey(e.key.toUpperCase());
});

function pressKey(key) {
    if (gameOver) return;
    message.textContent = "";

    if (key === "BACK" && col > 0) {
        col--;
        current = current.slice(0, -1);
        grid.children[row].children[col].textContent = "";
        return;
    }

    if (key === "ENTER") {
        if (current.length !== 5) {
            message.textContent = "Not enough letters";
            return;
        }
        if (!validWords.includes(current)) {
            message.textContent = "Not a valid word";
            return;
        }
        checkWord();
        return;
    }

    if (/^[A-Z]$/.test(key) && col < 5) {
        grid.children[row].children[col].textContent = key;
        current += key;
        col++;
    }
}

function checkWord() {
    for (let i = 0; i < 5; i++) {
        const tile = grid.children[row].children[i];
        if (current[i] === secret[i]) tile.classList.add("correct");
        else if (secret.includes(current[i])) tile.classList.add("present");
        else tile.classList.add("absent");
    }

    if (current === secret) {
        message.textContent = "ðŸŽ‰ You win!";
        gameOver = true;
        return;
    }

    row++;
    col = 0;
    current = "";

    if (row === 6) {
        message.textContent = "âŒ The word was: " + secret;
        gameOver = true;
    }
}
</script>

</body>
</html>
